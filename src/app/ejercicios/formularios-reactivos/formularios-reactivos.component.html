<div>
  <h1>Formulario de Alta</h1>

  <form [formGroup]="formulario" (ngSubmit)="onSubmit()">

    <!-- Username -->
    <div class="form-group">
      <label>Username *</label>
      <input type="text" class="form-control" formControlName="username"/>
      <div *ngIf="formulario.get('username')?.invalid && formulario.get('username')?.touched" class="alert alert-danger">
        <div *ngIf="formulario.get('username')?.errors?.['required']">Username obligatorio.</div>
        <div *ngIf="formulario.get('username')?.errors?.['minlength']">Username debe tener mínimo 4 caracteres.</div>
      </div>
    </div>

    <!-- Password -->
    <div class="form-group">
      <label>Password *</label>
      <input type="password" class="form-control" formControlName="password"/>
      <div *ngIf="formulario.get('password')?.invalid && formulario.get('password')?.touched" class="alert alert-danger">
        <div *ngIf="formulario.get('password')?.errors?.['required']">Password obligatorio.</div>
        <div *ngIf="formulario.get('password')?.errors?.['minlength']">Mínimo 4 caracteres.</div>
      </div>
    </div>

    <!-- Repeat Password -->
    <div class="form-group">
      <label>Repeat Password *</label>
      <input type="password" class="form-control" formControlName="repeatPassword"/>
      <div *ngIf="formulario.get('repeatPassword')?.invalid && formulario.get('repeatPassword')?.touched" class="alert alert-danger">
        <div *ngIf="formulario.get('repeatPassword')?.errors?.['required']">Repetir contraseña es obligatorio.</div>
        <div *ngIf="formulario.get('repeatPassword')?.errors?.['minlength']">Mínimo 4 caracteres.</div>
      </div>
      <div *ngIf="formulario.errors?.['mismatch'] && formulario.get('repeatPassword')?.touched" class="alert alert-danger">
        Las contraseñas no coinciden.
      </div>
    </div>

    <!-- Email -->
    <div class="form-group">
      <label>Email *</label>
      <input type="email" class="form-control" formControlName="email"/>
      <div *ngIf="formulario.get('email')?.invalid && formulario.get('email')?.touched" class="alert alert-danger">
        <div *ngIf="formulario.get('email')?.errors?.['required']">Email obligatorio.</div>
        <div *ngIf="formulario.get('email')?.errors?.['pattern']">Formato de email inválido.</div>
      </div>
    </div>

    <!-- Gender (Radio) -->
    <div class="form-group">
      <label>Género *</label>
      <div *ngFor="let g of genders">
        <input type="radio" [value]="g.id" formControlName="gender"/> {{g.name}}
      </div>
    </div>

    <!-- Orientation -->
    <div class="form-group">
      <label>Orientación *</label>
      <select class="form-control" formControlName="orientation">
        <option *ngFor="let o of orientations" [value]="o.id">{{ o.name }}</option>
      </select>
    </div>

    <!-- Relation Type -->
    <div class="form-group">
      <label>Tipo de relación *</label>
      <select class="form-control" formControlName="relationType">
        <option *ngFor="let r of relationTypes" [value]="r.id">{{ r.name }}</option>
      </select>
    </div>

    <!-- Conditions -->
    <div class="form-check">
      <input type="checkbox" class="form-check-input" formControlName="conditions" id="conditions">
      <label class="form-check-label" for="conditions">Acepto las condiciones *</label>
      <div *ngIf="formulario.get('conditions')?.invalid && formulario.get('conditions')?.touched" class="alert alert-danger">
        Debes aceptar las condiciones.
      </div>
    </div>

    <!-- Submit -->
    <button type="submit" class="btn btn-success"
            [disabled]="formulario.invalid">
      Enviar
    </button>

  </form>

</div>
